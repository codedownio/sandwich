"use strict";(self.webpackChunksandwich_site=self.webpackChunksandwich_site||[]).push([[6897],{2895:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>c,frontMatter:()=>t,metadata:()=>a,toc:()=>r});var o=s(6070),h=s(6113);const t={id:"sandwich-hedgehog",title:"Hedgehog"},d=void 0,a={id:"extensions/sandwich-hedgehog",title:"Hedgehog",description:"You can use sandwich-hedgehog (provided as a separate package) to easily integrate integrate Hedgehog tests into the test tree.",source:"@site/docs/extensions/sandwich-hedgehog.md",sourceDirName:"extensions",slug:"/extensions/sandwich-hedgehog",permalink:"/sandwich/docs/extensions/sandwich-hedgehog",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/extensions/sandwich-hedgehog.md",tags:[],version:"current",frontMatter:{id:"sandwich-hedgehog",title:"Hedgehog"},sidebar:"docs",previous:{title:"Golden testing",permalink:"/sandwich/docs/extensions/sandwich-golden"},next:{title:"QuickCheck",permalink:"/sandwich/docs/extensions/sandwich-quickcheck"}},i={},r=[{value:"Usage",id:"usage",level:2},{value:"Modifying the parameters",id:"modifying-the-parameters",level:2},{value:"Controlling Hedgehog parameters with command line args",id:"controlling-hedgehog-parameters-with-command-line-args",level:2},{value:"Demo",id:"demo",level:2}];function g(e){const n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,h.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["You can use ",(0,o.jsx)(n.code,{children:"sandwich-hedgehog"})," (provided as a separate package) to easily integrate integrate ",(0,o.jsx)(n.a,{href:"https://hedgehog.qa/",children:"Hedgehog"})," tests into the test tree."]}),"\n",(0,o.jsxs)(n.p,{children:["Haddocks can be found ",(0,o.jsx)(n.a,{href:"http://hackage.haskell.org/package/sandwich-hedgehog/docs/Test-Sandwich-Hedgehog.html",children:"here"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsxs)(n.p,{children:["To use ",(0,o.jsx)(n.code,{children:"sandwich-hedgehog"}),", just add the package to your project. Then, introduce a Hedgehog argument context using ",(0,o.jsx)(n.a,{href:"http://hackage.haskell.org/package/sandwich-hedgehog/docs/Test-Sandwich-Hedgehog.html#v:introduceHedgehog",children:"introduceHedgehog"}),". Now you can start writing props as test nodes using the ",(0,o.jsx)(n.a,{href:"http://hackage.haskell.org/package/sandwich-hedgehog/docs/Test-Sandwich-Hedgehog.html#v:prop",children:"prop"})," function. For example:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-haskell",metastring:'title="https://github.com/codedownio/sandwich/blob/master/demos/demo-hedgehog/app/Main.hs"',children:'import Hedgehog\nimport qualified Hedgehog.Gen as Gen\nimport qualified Hedgehog.Range as Range\n\nhedgehogDemo :: TopSpec\nhedgehogDemo = describe "Hedgehog tests" $ introduceHedgehog $ do\n  prop "List reversal" $ do\n    xs <- forAll $ Gen.list (Range.linear 0 100) Gen.alpha\n    reverse (reverse xs) === xs\n\n  prop "Failing list reversal" $ do\n    xs <- forAll $ Gen.list (Range.linear 0 100) Gen.alpha\n    reverse xs === xs\n'})}),"\n",(0,o.jsx)(n.h2,{id:"modifying-the-parameters",children:"Modifying the parameters"}),"\n",(0,o.jsxs)(n.p,{children:["If you use ",(0,o.jsx)(n.a,{href:"http://hackage.haskell.org/package/sandwich-hedgehog/docs/Test-Sandwich-Hedgehog.html#v:introduceHedgehog'",children:"introduceHedgehog'"}),", you can pass your own value for the ",(0,o.jsx)(n.a,{href:"https://hackage.haskell.org/package/sandwich-hedgehog/docs/Test-Sandwich-Hedgehog.html#t:HedgehogParams",children:"HedgehogParams"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["If you want to modify the already-introduced arguments in a test tree, we provide the ",(0,o.jsx)(n.a,{href:"http://hackage.haskell.org/package/sandwich-hedgehog/docs/Test-Sandwich-Hedgehog.html#v:modifyArgs",children:"modifyArgs"})," function, as well as helpers like ",(0,o.jsx)(n.code,{children:"modifySeed"}),", ",(0,o.jsx)(n.code,{children:"modifySize"}),", etc. These are modelled directly after HSpec's ",(0,o.jsx)(n.a,{href:"https://hackage.haskell.org/package/hspec-hedgehog/docs/Test-Hspec-Hedgehog.html",children:"Test.Hspec.Hedgehog"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"controlling-hedgehog-parameters-with-command-line-args",children:"Controlling Hedgehog parameters with command line args"}),"\n",(0,o.jsxs)(n.p,{children:["If you use the ",(0,o.jsx)(n.a,{href:"http://hackage.haskell.org/package/sandwich-hedgehog/docs/Test-Sandwich-Hedgehog.html#v:introduceHedgehogCommandLineOptions",children:"introduceHedgehogCommandLineOptions"})," family of functions, then some Hedgehog parameters can be controlled via the command line. To see the valid options, run Sandwich with ",(0,o.jsx)(n.code,{children:"--print-hedgehog-flags"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"Usage: demo [--hedgehog-seed STRING] [--hedgehog-size INT]\n            [--hedgehog-discard-limit INT]\n            [--hedgehog-shrink-limit INT]\n            [--hedgehog-shrink-retries INT] [--hedgehog-confidence INT]\n\nAvailable options:\n  --hedgehog-seed STRING   Seed as a tuple (a, b)\n  --hedgehog-size INT      Size of the randomly-generated data\n  --hedgehog-discard-limit INT\n                           The number of times a property is allowed to discard\n                           before the test runner gives up\n  --hedgehog-shrink-limit INT\n                           The number of times a property is allowed to shrink\n                           before the test runner gives up and prints the\n                           counterexample\n  --hedgehog-shrink-retries INT\n                           The number of times to re-run a test during shrinking\n  --hedgehog-confidence INT\n                           The acceptable occurrence of false positives\n"})}),"\n",(0,o.jsx)(n.h2,{id:"demo",children:"Demo"}),"\n",(0,o.jsx)(n.p,{children:"A demo is provided in the Sandwich repo."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"git clone git@github.com:codedownio/sandwich.git\ncd sandwich\nstack run demo-hedgehog -- --tui\n"})})]})}function c(e={}){const{wrapper:n}={...(0,h.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(g,{...e})}):g(e)}},6113:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>a});var o=s(758);const h={},t=o.createContext(h);function d(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(h):e.components||h:d(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);