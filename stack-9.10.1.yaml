
resolver: nightly-2025-02-04

# ghc-options:
#   "$locals": >-
#     -fwrite-ide-info
#     -hiedir .hie
#     -dumpdir .ghcdump
#     -Wredundant-constraints

nix:
  pure: false
  packages:
  - pcre
  - pkg-config
  - postgresql
  - zlib

packages:
- ./sandwich
- ./sandwich-contexts
- ./sandwich-contexts-docker
- ./sandwich-contexts-kubernetes
- ./sandwich-contexts-minio
- ./sandwich-hedgehog
- ./sandwich-quickcheck
- ./sandwich-slack
- ./sandwich-webdriver

extra-deps:
- vty-windows-0.2.0.3

- HaskellNet-0.6.1.2@sha256:a880046501c8b035002ac2dbf597e6d416552bd04b499719997a67407602afc8,2583

# - crypton-x509-validation-1.6.13

## For sandwich-contexts

- git: https://github.com/codedownio/minio-hs
  # branch: codedown-jul-2024-tolerant
  commit: 2fae6ae212a346acf400847d0b6cc647045822d1

## For sandwich-contexts-docker

- git: https://github.com/codedownio/docker-engine.git
  commit: ba5ebd823ed843a556cd8c24a5a0086a3f6e5a6c
  subdirs:
  - v1.44

## For sandwich-contexts-kubernetes

- git: https://github.com/codedownio/kubernetes-api.git
  # master branch
  commit: 1ceea12f82e71e36b4a2c9ff31cd50950758419f
  subdirs:
  - kubernetes-api-1.27
  - kubernetes-api-client

- git: https://github.com/codedownio/haskell-oidc-client
  # codedown-jan-2024-ghc96
  commit: 4c122412e80c45bd28d03ead16f1a153bd53fcf4

# https://github.com/kubernetes-client/haskell/issues/64
# https://github.com/channable/vaultenv/issues/99
- git: https://github.com/codedownio/hs-certificate
  # codedown-feb-2024
  # This branch
  # 1. Takes akshaymankar's fixes from https://github.com/haskell-tls/hs-certificate/pull/113
  # and rebases them on the most recent https://github.com/haskell-tls/hs-certificate master branch
  # 2. Cherry-picks kazuyamamoto's commit switching the package to crypton, from here:
  # https://github.com/kazu-yamamoto/crypton-certificate/commit/c11bbbeec2360ce797c5eb3bd4953cbc5bf1a0d6
  commit: dcd0d5b200e96e90c6daa728585c23be5309a955
  subdirs:
  - x509-validation
